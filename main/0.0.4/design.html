<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Design Choices :: Talend Component Kit Developer Reference Guide</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/0.0.4/design.html">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta name="date" content="2018-03-15T15:47:30.107Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link rel="stylesheet" href="../../_/css/idea.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>function gtag(){$gtag.push(arguments)}$gtag=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PSBN");</script>
  </head>
  <body class="article">
<header class="header" role="banner">
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="navbar-item">
                <a href="https://talend.github.io/component-runtime">Talend Component Kit</a>
                <span class="separator">//</span>
                <a href="https://talend.github.io/component-runtime">Docs</a>
            </div>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <div class="global-search">
                    <form role="search" action="search.html">
                        <div>
                            <input class="rounded" type="text" placeholder="Search" name="q">
                        </div>
                    </form>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <div class="navbar-link">Projects</div>
                    <div class="navbar-dropdown">
                        <div class="navbar-item"><strong>API</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-api">Repository</a>
                        <hr class="navbar-divider">
                        <div class="navbar-item"><strong>Runtime</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-rutime">Repository</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="main" data-version="0.0.4">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Talend Component Kit Developer Reference Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Programming Model</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-definition.html">Definition Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-registering.html">Registration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="gallery.html">Widget Gallery</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-internationalization.html">Labels and i18n</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Package</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-loading.html">Loading</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Build</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-tools-maven.html">Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-tools-gradle.html">Gradle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-internationalization.html">Internationalization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-actions.html">Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-built-in.html">Built-in services</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-interceptors.html">Interceptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-custom-api.html">Extend the API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Execute</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-best-practices.html">JUnit Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-junit.html">Testing HTTP API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-beam.html">Beam case</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-spark.html">Spark and JUnit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-multiple-envs.html">Multiple environments for the same tests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-maven-passwords.html">Secrets/Passwords and Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-generating-data.html">Generating data?</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Web</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation-rest.html">Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-generate-project-using-starter.html">Generate a component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-an-input-component.html">Create an input component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-an-output-component.html">Create an output component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-test-your-components.html">Test your components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-configuration-sensitive-data.html">Configuration and sensitive data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-components-rest-api.html">Create components for REST API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-test-rest-api.html">How to test a REST API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="current">
    <span class="title">Talend Component Kit Developer Reference Guide</span>
    <span class="version">0.0.4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Talend Component Kit Developer Reference Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.0.4</a>
        </li>
        <li class="version">
          <a href="../0.0.2/index.html">0.0.2</a>
        </li>
        <li class="version">
          <a href="../0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
    <button class="navigation-toggle"></button>
    <nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Talend Component Kit Developer Reference Guide</a></li>
  </ul>
</nav>
    <div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">0.0.4</button>
  <div class="versions-menu">
    <a class="version is-current" href="design.html">0.0.4</a>
    <a class="version" href="../0.0.2/design.html">0.0.2</a>
    <a class="version" href="../0.0.1/design.html">0.0.1</a>
  </div>
</div>
</div>
<article class="doc">
        <h1>Talend Component Design Choices</h1>
        <div class="sect1">
<h2 id="_component_api"><a class="anchor" href="#_component_api"></a>1. Component API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The component API has multiple strong choices:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it is declarative (through annotations) to ensure it is</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>evolutive (it can get new fancy featrues without breaking old code)</p>
</li>
<li>
<p>static as much as possible</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_evolution"><a class="anchor" href="#_evolution"></a>1.1. Evolution</h3>
<div class="paragraph">
<p>Being fully declarative, any new API can be added iteratively without requiring
any changes to existing components.</p>
</div>
<div class="paragraph">
<p>Example (projection on beam potential evolution):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyOutput onElement(MyInput data) {
    return ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>wouldn&#8217;t be affected by the addition of the new Timer API
which can be used like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyOutput onElement(MyInput data,
                          @Timer("my-timer") Timer timer) {
    return ...;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_static"><a class="anchor" href="#_static"></a>1.2. Static</h3>
<div class="sect3">
<h4 id="_ui_friendly"><a class="anchor" href="#_ui_friendly"></a>1.2.1. UI friendly</h4>
<div class="paragraph">
<p>Intent of the framework is to be able to fit java UI as well as web UI.
It must be understood as colocalized and remote UI. The direct impact
of that choice is to try to move as much as possible the logic to the
UI side for UI related actions. Typically we want to validate a pattern,
a size, &#8230;&#8203; on the client side and not on the server side. Being static encourages this practise.</p>
</div>
</div>
<div class="sect3">
<h4 id="_auditable_and_with_clear_expectations"><a class="anchor" href="#_auditable_and_with_clear_expectations"></a>1.2.2. Auditable and with clear expectations</h4>
<div class="paragraph">
<p>The other goal to be really static in its definition is to ensure the model will not be mutated at runtime
and all the auditing and modelling can be done before, in the design phase.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dev_friendly"><a class="anchor" href="#_dev_friendly"></a>1.2.3. Dev friendly</h4>
<div class="paragraph">
<p>Being static also ensures the development can be validated as much as possible through build tools.
This doesn&#8217;t replace the requirement to test the components but helps the developer to maintain its components
with automated tools.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flexible_data_modeling"><a class="anchor" href="#_flexible_data_modeling"></a>1.3. Flexible data modeling</h3>

</div>
<div class="sect2">
<h3 id="_generic_and_specific"><a class="anchor" href="#_generic_and_specific"></a>1.4. Generic and specific</h3>
<div class="paragraph">
<p>The processor API supports <code>JsonObject</code> as well as any custom model. Intent is to support generic component
development which need to access configured "object paths" and specific components which rely on a well defined
path from the input.</p>
</div>
<div class="paragraph">
<p>A generic component would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyOutput onElement(JsonObject input) {
    return ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A specific component would look like (with <code>MyInput</code> a POJO):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyOutput onElement(MyInput input) {
    return ...;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_no_runtime_assumption"><a class="anchor" href="#_no_runtime_assumption"></a>1.4.1. No runtime assumption</h4>
<div class="paragraph">
<p>By design the framework must run in DI (plain standalone java program) but also in Beam pipelines. It is also
out of scope of the framework to handle the way the runtime serializes - if needed - the data. For that reason
it is primordial to not import serialization constraint in the stack. This is why <code>JsonObject</code> is not an <code>IndexedRecord</code>
from avro for instance, to not impose any implementation.
Any actual serialization concern - implementation - should either be hidden in the framework runtime (= outside component developer scope)
or in the runtime integration with the framework (beam integration for instance). In this context, JSON-P is a good compromise
because it brings a very powerful API with very few constraints.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isolated"><a class="anchor" href="#_isolated"></a>2. Isolated</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The components must be able to execute even if they have conflicting libraries. For that purpose
it requires to isolate their classloaders. For that purpose a component will define
its dependencies based on a maven format and will always be bound to its own classloader.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest"><a class="anchor" href="#_rest"></a>3. REST</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_consumable_model"><a class="anchor" href="#_consumable_model"></a>3.1. Consumable model</h3>
<div class="paragraph">
<p>The definition payload is as flat as possible and <em>strongly</em> typed to ensure it can be manipulated by consumers.
This way the consumers can add/remove fields with just some mapping rules and don&#8217;t require any abstract tree handling.</p>
</div>
<div class="paragraph">
<p>The execution (runtime) configuration is the concatenation of a few framework metadata (only the version actually) and
a key/value model of the instance of the configuration based on the definition properties paths for the keys. This enables
the consumers to maintain and work with the keys/values up to their need.</p>
</div>
<div class="paragraph">
<p>The framework not being responsible for any persistence it is crucial to ensure consumers can handle it from end to end
which includes the ability to search for values (update a machine, update a port etc&#8230;&#8203;) and keys (new encryption rule on key <code>certificate</code> for instance).</p>
</div>
<div class="paragraph">
<p>Talend component is a metamodel provider (to build forms) and runtime <strong>execution</strong> platform (take a configuration instance and use it volatively
to execute a component logic). This implies it can&#8217;t own the data more than defining the contract it has for these two endpoints and must
let the consumers handle the data lifecycle (creation, encryption, deletion, &#8230;&#8203;.).</p>
</div>
</div>
<div class="sect2">
<h3 id="_execution_with_streaming"><a class="anchor" href="#_execution_with_streaming"></a>3.2. Execution with streaming</h3>
<div class="paragraph">
<p>A new mime type called <code>talend/stream</code> is introduced to define a streaming format.</p>
</div>
<div class="paragraph">
<p>It basically matches a JSON object per line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{"key1":"value1"}
{"key2":"value2"}
{"key1":"value11"}
{"key1":"value111"}
{"key2":"value2"}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fixed_set_of_icons"><a class="anchor" href="#_fixed_set_of_icons"></a>4. Fixed set of icons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Icons (<code>@Icon</code>) are based on a fixed set. Even if a custom icon is usable this is
without any guarantee. This comes from the fact components can be used in any environment
and require a kind of uniform look which can&#8217;t be guaranteed outside the UI itself so
defining only keys is the best way to communicate this information.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
when you exactly know how you will deploy your component (ie in the Studio) then you
can use `@Icon(value = CUSTOM, custom = "&#8230;&#8203;") to use a custom icon file.
</td>
</tr>
</table>
</div>
</div>
</div>
    </article>
  </main>
</div>
<footer class="footer">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links" style="">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/tacokit.js"></script>
<script>hljs.initHighlighting()</script>
<script>
(function (window, document) {
  var closedSize = '50px';
  document.querySelectorAll('.listingblock')
    .forEach(function (listingblock, index) {
      var pre = listingblock.querySelector('div.content > pre.highlightjs.highlight');
      if (!pre) {
        return;
      }
      var code = pre.querySelector('code.hljs');
      if (!code) {
        return;
      }

      var span = document.createElement('span');
      var initialBlockClosed = listingblock.className.indexOf('initial-block-closed') >= 0;
      span.className = 'code-' + (initialBlockClosed ? 'collapsed' : 'open') + '-handle code-handle-base';

      var height = code.style.height;
      if (initialBlockClosed) {
        code.style.height = closedSize;
      }

      span.addEventListener('click', function () {
        if (span.className == 'code-collapsed-handle code-handle-base') {
          code.style.height = height;
          span.className = 'code-open-handle code-handle-base';
        } else {
          code.style.height = closedSize;
          span.className = 'code-collapsed-handle code-handle-base';
        }
      }, false);

      pre.prepend(span);
    });
})(window, document);
</script>
  </body>
</html>
