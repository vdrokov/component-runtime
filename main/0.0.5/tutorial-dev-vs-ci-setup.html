<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Kit Developer Reference Guide :: </title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.0.4/tutorial-dev-vs-ci-setup.html">
    <meta name="generator" content="Talend Component Kit Generator">
<meta name="date" content="2018-08-07T15:23:43.523Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch.min.css" integrity="sha256-vusmcqkVvKdkwoueSJZLlO9y2P+Lp9fN3WwQUV9Uwfw=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch-theme-algolia.min.css" integrity="sha256-ZqsS4QagZnfArbOyheCO4qVjzzsMbg/WMvf5tLtId/Q=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@talend/bootstrap-theme@0.200.1/dist/bootstrap.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','GTM-PSBN')</script>
  </head>
  <body>
      <svg xmlns="http://www.w3.org/2000/svg" focusable="false" style="display: none;">
    <symbol id="talend-logo-square">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path fill="#FFF" d="M9.694 14.652a1.076 1.076 0 0 1-.715.421 1.086 1.086 0 1 1-.148-2.158c.235 0 .462.075.652.22.23.173.38.427.42.714a1.07 1.07 0 0 1-.209.803M2.15 2.627A1.084 1.084 0 1 1 .418 1.322 1.084 1.084 0 0 1 2.15 2.627m11.383 2.491a2.46 2.46 0 0 0-1.482.494L8.94 1.798a.59.59 0 1 0-.156.125l3.111 3.816a2.486 2.486 0 0 0-.557.718l-8.84-4.062c.065-.19.086-.394.057-.599A1.274 1.274 0 0 0 2.058.95a1.278 1.278 0 0 0-.952-.247 1.286 1.286 0 0 0 .356 2.544 1.279 1.279 0 0 0 .956-.668l8.838 4.06c-.11.264-.176.55-.187.85H3.563a.788.788 0 0 0-.31-.533.799.799 0 0 0-1.113.155.786.786 0 0 0 .156 1.105.799.799 0 0 0 1.267-.527h7.506c.014.323.088.63.215.91l-1.903.941a.592.592 0 1 0 .089.179l1.904-.94c.162.292.382.548.645.753l-2.473 3.404a1.28 1.28 0 0 0-1.742.291 1.288 1.288 0 0 0 .253 1.8 1.28 1.28 0 0 0 .952.246c.34-.048.64-.225.847-.499.207-.274.294-.612.246-.952a1.276 1.276 0 0 0-.399-.763l2.479-3.41a2.468 2.468 0 1 0 1.352-4.53"></path>
        </svg>
    </symbol>
    <symbol id="talend-component-kit-positive">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <g fill="none">
                <path fill="#005695" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
                <path fill="#FFF" d="M5.69 10.662a2.3 2.3 0 0 0 1.425.492 2.3 2.3 0 0 0 1.664-.709l-.631-.632 1.005-1.005a.33.33 0 0 0 0-.466.332.332 0 0 0-.467 0L7.68 9.347 6.633 8.3l1.005-1.005a.33.33 0 0 0-.467-.466L6.167 7.832l-.653-.652a2.3 2.3 0 0 0-.71 1.664c0 .54.187 1.037.498 1.43L3.878 11.7a.721.721 0 0 0-.358.027 5.824 5.824 0 0 1-.722-6.368c1.364-2.7 4.612-3.914 7.41-2.777l-.348.69 1.584-.369-.643-1.495-.351.695C7.384.832 3.818 2.15 2.32 5.117a6.359 6.359 0 0 0 .798 6.962.704.704 0 0 0 1.26.631.704.704 0 0 0-.036-.699l1.349-1.349z"></path>
                <path fill="#FFF" d="M12.623 3.031a.706.706 0 0 0-.973.894l-1.296 1.298a2.304 2.304 0 0 0-3.092.215l3.266 3.265a2.304 2.304 0 0 0 .213-3.092l1.299-1.297a.701.701 0 0 0 .504.006 5.838 5.838 0 0 1 .675 6.311c-1.332 2.636-4.524 3.871-7.284 2.826l.339-.67-1.585.368.643 1.494.36-.712c3.028 1.18 6.538-.162 8.005-3.064a6.375 6.375 0 0 0-.758-6.912.703.703 0 0 0-.316-.93z"></path>
            </g>
        </svg>
    </symbol>
</svg>

<header class="global-header">
  <nav class="navbar navbar-default">
      <div class="navbar-text-content nav navbar-nav">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <button aria-label="Go to Portal" id="header-talend-logo" type="button" class="btn-icon-only btn btn-link">
            <svg name="talend-logo-square" focusable="false" aria-hidden="true">
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-logo-square"></use>
            </svg>
        </button>
        <button aria-label="Kit logo" id="header-kit-logo" type="button" class="btn-icon-only btn btn-link">
          <svg name="talend-component-kit-positive" focusable="false" aria-hidden="true">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-component-kit-positive"></use>
          </svg>
        </button>
        <a class="navbar-single-link" href="index.html">Talend Component Kit</a>
        <div class="btn-group navbar-versions">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Version 0.0.5 <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
                <li class="navbar-item version is-latest">
                    <a href="../1.0.4/index.html">1.0.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.3/index.html">1.0.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.2/index.html">1.0.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.1/index.html">1.0.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.0/index.html">1.0.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.12/index.html">0.0.12</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.11/index.html">0.0.11</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.10/index.html">0.0.10</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.9/index.html">0.0.9</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.8/index.html">0.0.8</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.7/index.html">0.0.7</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.6/index.html">0.0.6</a>
                </li>
                <li class="navbar-item version is-current">
                    <a href="index.html">0.0.5</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.4/index.html">0.0.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.3/index.html">0.0.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.2/index.html">0.0.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.1/index.html">0.0.1</a>
                </li>
          </ul>
        </div>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Repositories <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://github.com/talend/component-api" target="_blank">API</a></li>
              <li><a class="navbar-item" href="https://github.com/talend/component-runtime" target="_blank">Runtime</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="contributors.html">Contributors</a></li>
              <li><a class="navbar-item" href="https://community.talend.com/t5/Component-Development/bd-p/ComponentDevelopment" target="_blank">Forum</a></li>
              <li><a class="navbar-item" href="https://help.talend.com/" target="_blank">Talend Help Center</a></li>
            </ul>
          </li>
        </ul>
        <form role="search" action="search.html" class="navbar-form navbar-right">
          <div class="input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input class="form-control" type="text" placeholder="Search" name="query" id="searchInput">
          </div>
        </form>
      </div>
    </nav>
</header>
            <main class="main">
              <div class="navigation-container grey-background hidden-xs col-sm-2" data-component="main" data-version="0.0.5">
  <aside class="navigation" role="navigation">
    <div class="panels">
      <div class="input-group nav-filter-group">
        <span class="input-group-addon"><i class="fa fa-search"></i></span>
        <input class="form-control" type="text" placeholder="Filter menu entries..." id="navFilterInput">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
        <nav class="nav-menu">
          <!-- <label>Talend Component Kit Developer Reference Guide</label> -->
          <ul class="nav nav-list tree" >
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Programming Model</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="component-definition.html">Definition Model</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-configuration.html">Configuration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-registering.html">Registration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="gallery.html">Widget Gallery</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-internationalization.html">Labels and i18n</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Package</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="component-loading.html">Loading</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Build</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="build-tools-maven.html">Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="build-tools-gradle.html">Gradle</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Services</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="services-internationalization.html">Internationalization</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-actions.html">Actions</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-built-in.html">Built-in services</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-interceptors.html">Interceptors</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-custom-api.html">Extend the API</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Execute</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="testing-best-practices.html">JUnit Integration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-junit.html">Testing HTTP API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-beam.html">Beam case</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-spark.html">Spark and JUnit</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-multiple-envs.html">Multiple environments for the same tests</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-maven-passwords.html">Secrets/Passwords and Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-generating-data.html">Generating data?</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Web</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="documentation-rest.html">Server</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Tutorials</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="tutorial-generate-project-using-starter.html">Generate a component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-input-component.html">Create an input component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-output-component.html">Create an output component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-your-components.html">Test your components</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-configuration-sensitive-data.html">Configuration and sensitive data</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-components-rest-api.html">Create components for REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-rest-api.html">How to test a REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
  </aside>
</div>
              <div class="col-xs-12 col-sm-10 maincontent">
                <div class="toolbar" role="navigation">

    <ol class="breadcrumb">
      <li class="crumb"><a href="#">Tutorials</a></li>
      <li class="crumb active"><a href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a></li>
    </ol>
</div>
                <article class="doc">
        <div class="row">
          <div class="col-sm-9 row">
            <div class="article-content">
              <div class="paragraph">
<p>Development vs Continuous integration Setup</p>
</div>
<div id="tutorial-dev-vs-ci-setup.adoc" class="paragraph">
<p><a href="tutorial-test-rest-api.html" class="page">In a previous tutorial</a>, we have shown how to create a mocked test for our Zendesk search component.</p>
</div>
<div class="paragraph">
<p>In the test you can notice that we have used our Zendesk credentials directly into the code to do a first capture of the API response,
then we have switched to a fake credentials in simulation mode as we do not call the real API anymore.</p>
</div>
<div class="paragraph">
<p><strong>But what if you want to continue to call the real API on the CI server or on a a specific environment ?</strong></p>
</div>
<div class="paragraph">
<p>Let&#8217;s make our test able to get the credentials depending on the execution mode (simulation/passthrough).</p>
</div>
<div class="sect1">
<h2 id="_credentials_setup"><a class="anchor" href="#_credentials_setup"></a>Credentials setup</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This instructions, need to be done, on the CI server or on any environment that require the real credentials.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will use <a href="https://maven.apache.org/guides/mini/guide-encryption.html">Maven servers, that support password encryption</a> as a credentials provider,
and the test rule <code>MavenDecrypterRule</code> provided by the framework.</p>
</div>
<div class="paragraph">
<p>This rule let you get credentials from maven settings using a server id.</p>
</div>
<div class="paragraph">
<p>So let&#8217;s create an encrypted server credential for our zendesk instance.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a master password using the command : <code>mvn --encrypt-master-password &lt;password&gt;</code></p>
</li>
<li>
<p>Store this master password in <code>settings-security.xml</code> file  in <code>~/.m2</code> folder.</p>
</li>
<li>
<p>Encrypt zendesk instance password using the command: <code>mvn --encrypt-password &lt;zendesk-password&gt;</code></p>
</li>
<li>
<p>Create a server entry under <strong>servers</strong> in maven <code>settings.xml</code> file in <code>~/.m2</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>    &lt;server&gt;
      &lt;id&gt;zendesk&lt;/id&gt;
      &lt;username&gt;username@email.com&lt;/username&gt;
      &lt;password&gt;The enccrypted password {oL37x/xiSvwtlhrMQ=}&lt;/password&gt;
    &lt;/server&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Encryption is optional but recommended.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to store the <code>settings-security.xml</code> and <code>settings.xml</code> files elsewhere that the default location <code>~/.m2</code>.
You can do it by setting the path of the directory containing the files
into the environment variable  <code>talend.maven.decrypter.m2.location</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_let_s_adapt_our_unit_test_to_use_the_credentials_from_maven_servers"><a class="anchor" href="#_let_s_adapt_our_unit_test_to_use_the_credentials_from_maven_servers"></a>Let&#8217;s adapt our unit test to use the credentials from maven servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We start by adding <code>MavenDecrypterRule</code> rule to our test class. This rule will let us inject server information stored
in maven settings.xml to our test. The rule will also decrypt the password if they are encrypted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can inject our Zendesk server to our test. For that we add a new field to our class annotated by <code>@DecryptedServer</code>
annotation that will holde the server id to be injected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);

    @DecryptedServer("zendesk")
    private Server server;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MavenDecrypterRule</code> will be able at runtime to inject the server instance into this class. the server instance contains
the username and de decrypted password.</p>
</div>
<div class="paragraph">
<p>Now we can use the <code>server</code> instance in our test to get the real credential in a secured manner.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BasicAuth basicAuth = new BasicAuth("https://instance.zendesk.com",
                            server.getUsername(),
                            server.getPassword());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the complete test class after modification :</p>
</div>
<div class="listingblock initial-block-closed">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @ClassRule
    public static final SimpleComponentRule component = new SimpleComponentRule("component.package");

    private final MavenDecrypter mavenDecrypter = new MavenDecrypter();

    @ClassRule
    public static final JUnit4HttpApi API = new JUnit4HttpApi()
                                                        .activeSsl();

    @Rule
    public final JUnit4HttpApiPerMethodConfigurator configurator = new JUnit4HttpApiPerMethodConfigurator(API);

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);

    @DecryptedServer("zendesk")
    private Server server;

    @Test
    public void searchQuery() {
        // Initiating the component test configuration
        BasicAuth basicAuth = new BasicAuth("https://instance.zendesk.com", server.getUsername(), server.getPassword());
        final SearchQuery searchQuery = new SearchQuery(basicAuth, "type:ticket status:open", "created_at", "desc");

        // We convert our configuration instance to URI configuration
        final String uriConfig = SimpleFactory.configurationByExample()
                        .forInstance(searchQuery)
                        .configured().toQueryString();

        // We create our job test pipeline
        Job.components()
                .component("search", "zendesk://search?" + uriConfig)
                .component("collector", "test://collector")
                .connections()
                .from("search").to("collector")
                .build()
                .run();

        final List&lt;JsonObject&gt; res = component.getCollectedData(JsonObject.class);
        assertEquals(4, res.size());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>This test will continue to work in simulation mode.</strong> as we have our API simulation proxy activated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set_up_ci_server_in_passthrough_mode"><a class="anchor" href="#_set_up_ci_server_in_passthrough_mode"></a>Set up CI server in passthrough mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s make it work in real mode on a CI server. we will use <a href="https://jenkins.io/">jenkins</a> in this tutorial</p>
</div>
<div class="paragraph">
<p>Log in to your jenkins then : Click on <strong>New Item</strong> to create a new build job</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/1_jenkins_new_item.png" alt="Create a new job">
</div>
</div>
<div class="paragraph">
<p>Enter an Item name (Job name) and choose the freestyle job. Then click OK.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/2_jenkins_new_item.png" alt="Create a new job">
</div>
</div>
<div class="paragraph">
<p>In <strong>Source Code Management</strong> section enter your project repository URL. We are using our github repository in this tutorial.
We will build the <code>master</code> branch</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/4_jenkins_source_code.png" alt="Source Code Management">
</div>
</div>
<div class="paragraph">
<p>In the <strong>Build Section</strong> click on <strong>add build step</strong>, then choose <strong>Invoke top-level Maven targets</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/6_jenkins_build_cmd.png" alt="Build Section">
</div>
</div>
<div class="paragraph">
<p>Choose you Maven version, and enter your maven build command. we are using a simple <code>clean install</code> and click <strong>save</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/6_jenkins_build_cmd_2.png" alt="Build Section">
</div>
</div>
<div class="paragraph">
<p>You can notice that we have added the option <code>-Dtalend.junit.http.passthrough=true</code> to our build command.
This Option will tell the API simulation proxy to run in <code>passthrough</code> mode. So it&#8217;s will forward all the http request
that we have maded in our test to the real API server.</p>
</div>
<div class="paragraph">
<p>We also get the real credentials, thanks to our <code>MavenDecrypterRule</code> rule.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can configure the <strong>passthrough</strong> mode globally on your CI server by setting the environment variable <code>talend.junit.http.passthrough</code>
to <code>true</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>6.Test the job. click <strong>Build now</strong> you can notice that your job have built correctly.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/7_jenkins_build_result.png" alt="Test the job">
</div>
</div>
<div class="paragraph">
<p>That&#8217;s all you need to do, now your tests run in a simulation mode on dev and in a (passthrough) mode on your CI server.</p>
</div>
</div>
</div>
            </div>
          </div>
          <div class="col-sm-3 container article-side-panel">
            <nav class="article-anchors">
              <div class="article-side-actions">

                <ul>
                    <li>
                      <a class="article-side-actions-link" target="_blank" href="https://github.com/Talend/component-runtime/blob/component-runtime-0.0.5/documentation/src/main/antora/modules/ROOT/pages/tutorial-dev-vs-ci-setup.adoc">
                        <i class="fa fa-edit"></i> &nbsp; &nbsp; Suggest an edit
                      </a>
                    </li>

                    <li>
                                <a class="article-side-actions-link" target="_blank"
                                   href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Ftutorial-dev-vs-ci-setup.html&text=Talend%20Component%20Kit%20%3E%3E%20undefined%20%3E%3E%20&tw_p=tweetbutton&url=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Ftutorial-dev-vs-ci-setup.html">
                                    <i class="fab fa-twitter"></i> &nbsp; &nbsp; Tweet
                                </a>
                            </li>
                            <li>
                                <a class="article-side-actions-link"
                                   href="mailto:?subject=Talend%20Component%20Kit%3A%20undefined&body=Talend%20Component%20Kit%3A%20undefined%0A%0Ahttps%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Ftutorial-dev-vs-ci-setup.html">
                                    <i class="far fa-envelope"></i> &nbsp; &nbsp; Mail
                                </a>
                            </li>

                </ul>
              </div>
              <h1 class="article-side-toc">In this article</h1>
            </nav>
          </div>
          <a href="#top" class="top">Scroll to top</a>
        </div>
        <script>(window.talend = (window.talend || {})).article = true;</script>
    </article>
              </div>
            </main>
      </main>
      <footer class="footer ">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links pull-left">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright pull-right" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/rmannibucau/00206484a54ac569e091513e6d2a1c01/raw/46cd5d77ba1abe678f83d11490e12a327b62d7ee/anchorific.js"></script>
<script src="../../_/js/talend.js"></script>
  </body>
</html>
